# webpack 项目优化

>
- 1.优化构建速度。在项目庞大时构建耗时可能会变的很长，每次等待构建的耗时加起来也会是个大数目。
  - 4-1 缩小文件搜索范围
  - 4-2 使用 DllPlugin
  - 4-3 使用 HappyPack
  - 4-4 使用 ParallelUglifyPlugin  
- 2.优化使用体验。通过自动化手段完成一些重复的工作，让我们专注于解决问题本身。
  - 4-5 使用自动刷新
  - 4-6 开启模块热替换

>
- 3.优化输出质量
  优化输出质量的目的是为了给用户呈现体验更好的网页，例如减少首屏加载时间、提升性能流畅度等。   
  这至关重要，因为在互联网行业竞争日益激烈的今天，这可能关系到你的产品的生死。
  优化输出质量本质是优化构建输出的要发布到线上的代码，分为以下几点：
  - 减少用户能感知到的加载时间，也就是首屏加载时间。
    - 4-7 区分环境
    - 4-8 压缩代码
    - 4-9 CDN 加速
    - 4-10 使用 Tree Shaking
    - 4-11 提取公共代码
    - 4-12 按需加载
  - 提升流畅度，也就是提升代码性能。
    - 4-13 使用 Prepack
    - 4-14 开启 Scope Hoisting
  - 优化的关键是找出问题所在，这样才能一针见血，
    - 4-15 输出分析 教你如何利用工具快速找出问题所在。
  - 4-16 优化总结 对以上的优化方法做一个总结

## 4-1 缩小文件搜索范围

- 4-1-1 


## 4-15 输出分析
>为了更简单直观的分析输出结果，社区中出现了许多可视化的分析工具。  
这些工具以图形的方式把结果更加直观的展示出来，让你快速看到问题所在。 

>两种分析工具：
- 1.官方的可视化分析工具: [ Webpack Analyse: 在线 Web 应用](http://webpack.github.io/analyse/)
- 2.webpack-bundle-analyzer：

#### 4-15-1 生成 `stats.json`

在启动 Webpack 时带上以上两个参数，启动命令如下 webpack --profile --json > stats.json，你会发现项目中多出了一个 stats.json 文件。 这个 stats.json 文件是给后面介绍的可视化分析工具使用的。

>webpack --profile --json 会输出字符串形式的 JSON，> stats.json 是 UNIX/Linux 系统中的管道命令、含义是把 webpack --profile --json 输出的内容通过管道输出到 stats.json 文件中。


#### 4-15-2 官方的可视化分析工具: [ Webpack Analyse: 在线 Web 应用](http://webpack.github.io/analyse/)
>打开 Webpack Analyse 链接的网页后，你就会看到一个弹窗提示你上传 JSON 文件，  
也就是需要上传上面讲到的 stats.json 文件




#### 4-15-3 `webpack-bundle-analyzer`
  >
  - 安装 webpack-bundle-analyzer 到全局，执行命令 npm i -g webpack-bundle-analyzer；
  - 按照上面提到的方法生成 stats.json 文件；
  - 在项目根目录中执行 webpack-bundle-analyzer 后，浏览器会打开对应网页看到以上效果




## 4-16 优化总结



## 参考
- [深入浅出 webpack ](http://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-1%E7%BC%A9%E5%B0%8F%E6%96%87%E4%BB%B6%E6%90%9C%E7%B4%A2%E8%8C%83%E5%9B%B4.html)
