# 1.7.7 高级响应式系统 API

## customRef

>customRef 用于自定义一个 ref，可以显式地控制依赖追踪和触发响应，接受一个工厂函数，  
两个参数分别是用于追踪的 track 与用于触发响应的 trigger，  
并返回一个带有 get 和 set 属性的对象。

使用自定义 ref 实现带防抖功能的 v-model ：

```
<input v-model="text" />

function useDebouncedRef(value, delay = 200) {
  let timeout
  return customRef((track, trigger) => {
    return {
      get() {
        track()
        return value
      },
      set(newValue) {
        clearTimeout(timeout)
        timeout = setTimeout(() => {
          value = newValue
          trigger()
        }, delay)
      },
    }
  })
}

export default {
  setup() {
    return {
      text: useDebouncedRef('hello'),
    }
  },
}
```


## 参考
- [高级响应式系统 API](https://vue-composition-api-rfc.netlify.app/zh/api.html#%E9%AB%98%E7%BA%A7%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F-api)




